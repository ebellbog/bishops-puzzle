<html>
    <head>
        <title>TreeClimber</title>
        <meta name="theme-color" content="#6ca146">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Titillium+Web:wght@200;400;600&display=swap" rel="stylesheet">
        <script defer="" src="https://use.fontawesome.com/releases/v5.10.0/js/all.js"></script>
    </head>
    <body class="show-settings">
        <div id="btn-bar">
            <div id="show-settings" class="btn" title="Show help & settings"><i class="fa fa-bars"></i></div>

            <h1 class="bg-blur"><img id="logo" src="./dist/monkey_icon.png"></img> TreeClimber <span class="byline desktop-only">&nbsp;|&nbsp; A visual tool for exploring decision trees</span></h1>

            <div id="reset-game" class="btn" title="Reset game"><i class="fa fa-undo"></i></div>
            <div id="reset-layout" class="btn" title="Reset layout"><i class="fas fa-border-all"></i></div>
        </div>
        <div id="settings" class="bg-blur">
            <div class="settings-header">
                <label>Game: </label>
                <select>
                    <option value="bishops">The Bishops Puzzle</option>
                    <option value="knights" disabled>The Knights Puzzle</option>
                    <option value="queens" disabled>The N-Queens Problem</option>
                </select>
                <div id="hide-settings" class="btn" title="Hide"><i class="fa fa-times"></i></div>
            </div>
            <div class="settings-description">
                A classic chess puzzle, featured in <i>The 7th Guest</i>, in which the goal is for the black and white bishops to switch places.
                No piece may move onto a square where it could be captured.
            </div>
            <div class="btn-wrapper">
                <hr>
                <div class="btn-group">
                    <div class="toggle-btn active" data-toggle="help-panel">Help</div>
                    <div class="toggle-btn" data-toggle="settings-panel">Settings</div>
                </div>
                <hr>
            </div>
            <div class="settings-content" id="help-panel">
                <div class="help-item">Hover over a <i class="fa fa-fw fa-chess-bishop"></i> to see how it can move:</div>
                <div class="help-item">
                    <i class="fa fa-fw fa-square valid-color"></i> You can move here safely <br>
                    <i class="fa fa-fw fa-square prior-color"></i> You've moved here before <br>
                    <i class="fa fa-fw fa-square invalid-color"></i> Square attacked by another <i class="fa fa-fw fa-chess-bishop"></i>
                </div>
                <div class="help-item">To move, click a <i class="fa fa-fw fa-chess-bishop"></i> on any <i class="fa fa-fw fa-chess-board"></i>, then choose a <i class="fa fa-fw fa-square"></i>. A new <i class="fa fa-fw fa-chess-board"></i> will appear with this move applied.</div>
                <div class="help-item">Click & drag a <i class="fa fa-fw fa-chess-board"></i> to reposition it. Reset all <i class="fa fa-fw fa-chess-board"></i> by clicking the <i class="fa fa-fw fa-border-all"></i> icon.</div>
                <div class="help-item">Click <i class="fa fa-fw fa-plus-circle"></i> or right click a <i class="fa fa-fw fa-chess-board"></i> to get AI assistance.</div>
            </div>
            <div class="settings-content" id="settings-panel" hidden>
                <div class="input-group">
                    <label>Board size:</label>
                    <div>
                        <input type="number" value="4" min="2" max="15" id="num-rows">
                        <span class="spacer"> x </span>
                        <input type="number" value="5" min="3" max="15" id="num-cols">
                    </div>
                </div>
                <div class="input-group">
                    <label>Show pieces:</label>
                    <div>
                        <select id="show-pieces">
                            <option value="all">All</option>
                            <option value="black">Black squares</option>
                            <option value="white">White squares</option>
                        </select>
                    </div>
                </div>
                <div class="checkbox-group">
                    <div class="custom-checkbox">
                        <input id="show-moves" type="checkbox" autocomplete="off">
                        <div class="checkbox"></div>
                    </div>
                    <label for="show-moves">Show moves</label>
                </div>
                <div class="checkbox-group">
                    <div class="custom-checkbox">
                        <input id="show-stats" type="checkbox" autocomplete="off">
                        <div class="checkbox"></div>
                    </div>
                    <label for="show-stats">Show stats</label>
                </div>
                <div class="checkbox-group">
                    <div class="custom-checkbox">
                        <input type="checkbox" id="draw-branches" checked>
                        <div class="checkbox"></div>
                    </div>
                    <label for="draw-branches">Leafy branches</label>
                </div>
            </div>
        </div>
        <div id="state-graph" class="no-borders tree-styling">
            <div class="row"></div>
            <svg id="svg-layer" xmlns="http://www.w3.org/2000/svg">
                <g id="all-branches"></g>
                <g id="all-leaves"></g>
                <g id="all-labels"></g>
            </svg>
            <svg id="svg-templates" xmlns="http://www.w3.org/2000/svg">
                <g class="branch-group">
                    <!-- Even though we will change #temp-id, it's required here for browsers to make the connection with xlink:href on mpath -->
                    <path class="branch" id="temp-id"></path>

                    <g class="label-group">
                        <rect class="label-bg" width="78px" height="24px" rx="12px" style="transform: translate(-36px, -12px)"></rect>
                        <text class="label-text"></text>
                        <animateMotion dur="1s" keyPoints="0.5; 0.5" keyTimes="0; 1" repeatCount="indefinite" calcMode="linear">
                            <mpath xlink:href="#temp-id"></mpath>
                        </animateMotion>
                    </g>

                    <!-- We will use JavaScript to clone this template and set keyPoints on animateMotion-->
                    <g class="leaf-group">
                        <path class="branch-leaf left-leaf"></path>
                        <animateMotion dur="1s" keyTimes="0; 1" repeatCount="indefinite" calcMode="linear" rotate="auto-reverse">
                            <mpath xlink:href="#temp-id"></mpath>
                        </animateMotion>
                    </g>
                </g>
            </svg>
        </div>
        <div class="context-menu bg-blur">
            <div class="menu-option" data-action="hint">Get a hint</div>
            <div class="menu-option" data-action="solve">Solve game from here</div>
            <div class="menu-option" data-action="expand">Make all moves</div>
        </div>
        <div id="jungle-leaves" class="desktop-only"></div>
    </body>
</html>